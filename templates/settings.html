{% extends "base.html" %}

{% block title %}系统设置 - Secretary{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">推送设置</h4>
            </div>
            <div class="card-body">
                <form method="post" id="apprise-form">
                    <input type="hidden" name="action" value="update_apprise">
                    <div class="mb-3">
                        <label for="apprise-urls" class="form-label">Apprise URLs</label>
                        <textarea class="form-control" id="apprise-urls" name="apprise_urls" rows="5" placeholder="每行一个Apprise URL">{{ apprise_urls }}</textarea>
                        <div class="form-text">
                            支持多种推送方式，每行一个URL。例如：<br>
                            tgram://bottoken/ChatID<br>
                            discord://webhook_id/webhook_token<br>
                            wecombot://key<br>
                            更多格式请参考 <a href="https://github.com/caronc/apprise/wiki" target="_blank">Apprise Wiki</a>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">保存推送设置</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">自动回复设置</h4>
            </div>
            <div class="card-body">
                <form method="post" id="auto-reply-form">
                    <input type="hidden" name="action" value="update_auto_reply">
                    <div class="mb-3">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="enable-auto-reply" name="enable_auto_reply" {% if enable_auto_reply %}checked{% endif %}>
                            <label class="form-check-label" for="enable-auto-reply">启用自动回复</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="auto-reply-prompt" class="form-label">自动回复提示词</label>
                        <textarea class="form-control" id="auto-reply-prompt" name="auto_reply_prompt" rows="5" placeholder="自动回复的LLM提示词">{{ auto_reply_prompt }}</textarea>
                        <div class="form-text">
                            用于生成回复内容的提示词模板，使用{content}作为内容占位符。<br>
                            注意：此设置为全局设置，也可以在账号管理中为每个账号单独设置。
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">保存自动回复设置</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">代理设置</h4>
            </div>
            <div class="card-body">
                <form method="post" id="proxy-form">
                    <input type="hidden" name="action" value="update_proxy">
                    <div class="mb-3">
                        <label for="http-proxy" class="form-label">HTTP代理</label>
                        <input type="text" class="form-control" id="http-proxy" name="http_proxy" value="{{ http_proxy }}" placeholder="http://127.0.0.1:7890">
                        <div class="form-text">
                            设置HTTP代理，用于访问Twitter等需要代理的网站。<br>
                            格式：http://主机:端口 或 socks5://主机:端口
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">保存代理设置</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">账号设置</h4>
            </div>
            <div class="card-body">
                <form method="post" id="account-form">
                    <input type="hidden" name="action" value="update_password">
                    <div class="mb-3">
                        <label for="current-password" class="form-label">当前密码</label>
                        <input type="password" class="form-control" id="current-password" name="current_password">
                    </div>
                    <div class="mb-3">
                        <label for="new-password" class="form-label">新密码</label>
                        <input type="password" class="form-control" id="new-password" name="new_password">
                    </div>
                    <div class="mb-3">
                        <label for="confirm-password" class="form-label">确认新密码</label>
                        <input type="password" class="form-control" id="confirm-password" name="confirm_password">
                    </div>
                    <button type="submit" class="btn btn-primary">更改密码</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
